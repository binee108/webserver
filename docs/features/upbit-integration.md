# Upbit ê±°ë˜ì†Œ í†µí•© ê°€ì´ë“œ

## ê°œìš”

Upbit(ì—…ë¹„íŠ¸)ëŠ” ëŒ€í•œë¯¼êµ­ ìµœëŒ€ ì•”í˜¸í™”í ê±°ë˜ì†Œë¡œ, ë³¸ ì‹œìŠ¤í…œì—ì„œëŠ” KRW(ì›í™”) ë§ˆì¼“ ê¸°ë°˜ í˜„ë¬¼ ê±°ë˜ë¥¼ ì§€ì›í•©ë‹ˆë‹¤. ì´ ë¬¸ì„œëŠ” Upbit ê³„ì • ë“±ë¡ë¶€í„° ì›¹í›… ì£¼ë¬¸ ì‹¤í–‰ê¹Œì§€ ì „ì²´ í†µí•© ê³¼ì •ì„ ë‹¤ë£¹ë‹ˆë‹¤.

### ì§€ì› ê¸°ëŠ¥

âœ… **ì§€ì›í•˜ëŠ” ê¸°ëŠ¥**:
- í˜„ë¬¼(Spot) ê±°ë˜
- KRW ë§ˆì¼“ ì „ìš©
- LIMIT(ì§€ì •ê°€) ì£¼ë¬¸
- MARKET(ì‹œì¥ê°€) ì£¼ë¬¸
- ë°°ì¹˜ ì£¼ë¬¸ (ìˆœì°¨ ì²˜ë¦¬ - `create_batch_orders_async`)
- ë¯¸ì²´ê²° ì£¼ë¬¸ ì¡°íšŒ/ì·¨ì†Œ
- ì”ì•¡ ì¡°íšŒ
- ë§ˆì¼“ ì •ë³´ ì¡°íšŒ (215ê°œ ì‹¬ë³¼)
- í˜„ì¬ê°€ ì •ë³´ ì¡°íšŒ

âŒ **ë¯¸ì§€ì› ê¸°ëŠ¥**:
- Testnet (ì‹¤ì„œë²„ APIë§Œ ì‚¬ìš© ê°€ëŠ¥)
- ì„ ë¬¼(Futures) ê±°ë˜
- STOP_LIMIT, STOP_MARKET ì£¼ë¬¸
- ê³µì‹ ë°°ì¹˜ API (ìˆœì°¨ í´ë°± ë°©ì‹ìœ¼ë¡œ êµ¬í˜„)
- BTC, USDT ë§ˆì¼“ (KRW ë§ˆì¼“ë§Œ ì§€ì›)

### ì œì•½ì‚¬í•­

| í•­ëª© | ì œì•½ ë‚´ìš© |
|------|----------|
| **ë§ˆì¼“** | KRW ë§ˆì¼“ë§Œ ì§€ì› |
| **ìµœì†Œ ì£¼ë¬¸ê¸ˆì•¡** | 5,000 KRW |
| **ê°€ê²© ë‹¨ìœ„** | ì •ìˆ˜ (ì†Œìˆ˜ì  ì—†ìŒ) |
| **Rate Limit** | ì´ˆë‹¹ 8íšŒ, ë¶„ë‹¹ 600íšŒ |
| **Testnet** | ë¯¸ì§€ì› (ì‹¤ì„œë²„ë§Œ) |
| **ë°°ì¹˜ API** | ë¯¸ì§€ì› (ìˆœì°¨ ì²˜ë¦¬) |

---

## Upbit íŠ¹ì§•

### ê±°ë˜ì†Œ ì •ë³´

- **ì§€ì—­**: ëŒ€í•œë¯¼êµ­ (êµ­ë‚´ 1ìœ„)
- **ê¸°ì¤€ í†µí™”**: KRW (ì›í™”)
- **ê±°ë˜ íƒ€ì…**: í˜„ë¬¼ ê±°ë˜ë§Œ
- **ìš´ì˜ í™˜ê²½**: ì‹¤ì„œë²„ë§Œ (í…ŒìŠ¤íŠ¸ë„· ì—†ìŒ)

### API íŠ¹ì„±

#### ì¸ì¦ ë°©ì‹
- **ì•Œê³ ë¦¬ì¦˜**: JWT (JSON Web Token)
  - ì„œëª…: HS256 (HMAC-SHA256)
  - ì¿¼ë¦¬ í•´ì‹œ: SHA512
- **êµ¬ì¡°**:
  ```json
  {
    "access_key": "YOUR_ACCESS_KEY",
    "nonce": "uuid4",
    "query_hash": "sha512(query_string)",
    "query_hash_alg": "SHA512"
  }
  ```

#### Rate Limiting
- **ë¶„ë‹¹ ì œí•œ**: 600íšŒ
- **ì´ˆë‹¹ ì œí•œ**: 8íšŒ
- **êµ¬í˜„ ë°©ì‹**: `asyncio.Lock()` ê¸°ë°˜ ìˆœì°¨ ì‹¤í–‰
- **ì•ˆì „ ë§ˆì§„**: 55% (ì´ˆë‹¹ ì•½ 4.4íšŒ ì‹¤í–‰)

#### ë°°ì¹˜ ì£¼ë¬¸ ì„±ëŠ¥
UpbitëŠ” ë°°ì¹˜ APIë¥¼ ì œê³µí•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ìˆœì°¨ ì²˜ë¦¬í•©ë‹ˆë‹¤:
- **16ê°œ ì£¼ë¬¸**: ì•½ 3.6ì´ˆ ì†Œìš”
- **ì²˜ë¦¬ ê°„ê²©**: ê° ì£¼ë¬¸ ê°„ 0.125ì´ˆ ë”œë ˆì´ (1/8ì´ˆ)
- **ë™ì‹œì„± ì œì–´**: `asyncio.Lock()`ìœ¼ë¡œ ì™„ì „ ìˆœì°¨ ì‹¤í–‰

### ì§€ì› ì£¼ë¬¸ íƒ€ì…

| ì£¼ë¬¸ íƒ€ì… | ì§€ì› | ë¹„ê³  |
|-----------|------|------|
| `LIMIT` | âœ… | ì§€ì •ê°€ ì£¼ë¬¸ |
| `MARKET` | âœ… | ì‹œì¥ê°€ ì£¼ë¬¸ (ì¦‰ì‹œ ì²´ê²°) |
| `STOP_LIMIT` | âŒ | Upbit ë¯¸ì§€ì› |
| `STOP_MARKET` | âŒ | Upbit ë¯¸ì§€ì› |
| `CANCEL_ALL_ORDER` | âœ… | ì „ì²´ ì£¼ë¬¸ ì·¨ì†Œ |

âš ï¸ **ì£¼ì˜**: STOP ì£¼ë¬¸ì´ í•„ìš”í•œ ê²½ìš° Binance ë“± ë‹¤ë¥¸ ê±°ë˜ì†Œ ì‚¬ìš© í•„ìš”

---

## API í‚¤ ë°œê¸‰ ë°©ë²•

### 1. Upbit ì›¹ì‚¬ì´íŠ¸ ë¡œê·¸ì¸
1. [Upbit í™ˆí˜ì´ì§€](https://upbit.com) ì ‘ì†
2. ë¡œê·¸ì¸ ë˜ëŠ” íšŒì›ê°€ì…

### 2. Open API ê´€ë¦¬ í˜ì´ì§€ ì´ë™
1. ìš°ì¸¡ ìƒë‹¨ **ë§ˆì´í˜ì´ì§€** í´ë¦­
2. ì¢Œì¸¡ ë©”ë‰´ **Open API ê´€ë¦¬** ì„ íƒ

### 3. API í‚¤ ë°œê¸‰
1. **Open API í‚¤ ë°œê¸‰** ë²„íŠ¼ í´ë¦­
2. ë³¸ì¸ ì¸ì¦ (OTP ë˜ëŠ” SMS)

### 4. ê¶Œí•œ ì„¤ì •
í•„ìš”í•œ ê¶Œí•œë§Œ ì„ íƒí•˜ì„¸ìš”:

| ê¶Œí•œ | ì„¤ëª… | í•„ìˆ˜ ì—¬ë¶€ |
|------|------|-----------|
| **ìì‚° ì¡°íšŒ** | ì”ì•¡ í™•ì¸ | âœ… í•„ìˆ˜ |
| **ì£¼ë¬¸ ì¡°íšŒ** | ë¯¸ì²´ê²° ì£¼ë¬¸ í™•ì¸ | âœ… í•„ìˆ˜ |
| **ì£¼ë¬¸í•˜ê¸°** | ì£¼ë¬¸ ìƒì„±/ì·¨ì†Œ | âœ… í•„ìˆ˜ |
| **ì…ì¶œê¸ˆ** | ì…ê¸ˆ/ì¶œê¸ˆ | âŒ ë¹„í™œì„±í™” ê¶Œì¥ |

âš ï¸ **ë³´ì•ˆ ê¶Œê³ **: ì…ì¶œê¸ˆ ê¶Œí•œì€ ì ˆëŒ€ í™œì„±í™”í•˜ì§€ ë§ˆì„¸ìš”!

### 5. API í‚¤ ë³µì‚¬
- **Access Key**: ê¸´ ë¬¸ìì—´ (ì˜ˆ: `abcdef123456...`)
- **Secret Key**: í•œ ë²ˆë§Œ í‘œì‹œë¨ â†’ ì•ˆì „í•œ ê³³ì— ë³´ê´€

âš ï¸ **ì¤‘ìš”**: Secret KeyëŠ” ë°œê¸‰ ì‹œ í•œ ë²ˆë§Œ í‘œì‹œë©ë‹ˆë‹¤. ë³µì‚¬í•˜ì—¬ ì•ˆì „í•˜ê²Œ ë³´ê´€í•˜ì„¸ìš”.

### 6. IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ì„¤ì • (ê¶Œì¥)
1. **IP ì£¼ì†Œ ë“±ë¡** í™œì„±í™”
2. ì„œë²„ IP ì¶”ê°€
3. ë¶ˆí•„ìš”í•œ IPì—ì„œì˜ ì ‘ê·¼ ì°¨ë‹¨

---

## ê³„ì¢Œ ë“±ë¡ ë°©ë²•

### ì›¹ UIë¥¼ í†µí•œ ë“±ë¡

#### 1. ê³„ì¢Œ ì¶”ê°€ í˜ì´ì§€ ì´ë™
- ìƒë‹¨ ë©”ë‰´ **ê³„ì • ê´€ë¦¬** â†’ **ìƒˆ ê³„ì • ì¶”ê°€**

#### 2. ì •ë³´ ì…ë ¥
| í•„ë“œ | ê°’ | ì„¤ëª… |
|------|-----|------|
| **Exchange** | `UPBIT` | ëŒ€ë¬¸ìë¡œ ì •í™•íˆ ì…ë ¥ |
| **Account Type** | `CRYPTO` | ì•”í˜¸í™”í ê³„ì • |
| **Market Type** | `SPOT` | í˜„ë¬¼ ê±°ë˜ |
| **API Key** | Access Key | Upbitì—ì„œ ë°œê¸‰ë°›ì€ Access Key |
| **API Secret** | Secret Key | Upbitì—ì„œ ë°œê¸‰ë°›ì€ Secret Key |
| **Is Testnet** | âŒ ì²´í¬ ì•ˆ í•¨ | Testnet ë¯¸ì§€ì› |

#### 3. ì €ì¥ ë° ê²€ì¦
- **ì €ì¥** ë²„íŠ¼ í´ë¦­
- ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ API ì—°ê²° í…ŒìŠ¤íŠ¸ ìˆ˜í–‰
- ì„±ê³µ ë©”ì‹œì§€ í™•ì¸

### CLIë¥¼ í†µí•œ ë“±ë¡ (ì„ íƒì‚¬í•­)

```bash
# ê³„ì • ë“±ë¡ CLI ì‹¤í–‰
python -m web_server.app.cli.accounts add-account

# ëŒ€í™”í˜• ì…ë ¥:
# Exchange: UPBIT
# Account Type: CRYPTO
# Market Type: SPOT
# API Key: [Access Key]
# API Secret: [Secret Key]
# Is Testnet: no
```

---

## ì „ëµ ì—°ë™

### 1. ì „ëµ ê´€ë¦¬ í˜ì´ì§€ ì´ë™
- ìƒë‹¨ ë©”ë‰´ **ì „ëµ ê´€ë¦¬**

### 2. ì „ëµ ì„ íƒ
- ê¸°ì¡´ ì „ëµ ì„ íƒ ë˜ëŠ” ì‹ ê·œ ì „ëµ ìƒì„±

### 3. ê³„ì¢Œ ì—°ë™
1. ì „ëµ ìƒì„¸ í˜ì´ì§€ì—ì„œ **ê³„ì • ì—°ë™** íƒ­ í´ë¦­
2. **ê³„ì • ì¶”ê°€** ë²„íŠ¼ í´ë¦­
3. Upbit ê³„ì¢Œ ì„ íƒ
4. ì„¤ì • ì…ë ¥:
   - **ê°€ì¤‘ì¹˜**: ìë³¸ ë°°ë¶„ ë¹„ìœ¨ (ì˜ˆ: 50%)
   - **ìµœëŒ€ í¬ì§€ì…˜ ìˆ˜**: ë™ì‹œ ë³´ìœ  ê°€ëŠ¥í•œ ì‹¬ë³¼ ìˆ˜
5. **ì €ì¥** ë²„íŠ¼ í´ë¦­

### 4. ì—°ë™ í™•ì¸
- ì „ëµ ëŒ€ì‹œë³´ë“œì—ì„œ ì—°ë™ëœ ê³„ì¢Œ ëª©ë¡ í™•ì¸
- ì”ì•¡ ì •ë³´ ìë™ í‘œì‹œ

---

## ì‹¬ë³¼ í˜•ì‹

### í‘œì¤€ í˜•ì‹ (ì›¹í›… ìš”ì²­)
**í˜•ì‹**: `BASE/QUOTE` (ìŠ¬ë˜ì‹œ í¬í•¨)

**ì˜ˆì‹œ**:
- `BTC/KRW` - ë¹„íŠ¸ì½”ì¸/ì›í™”
- `ETH/KRW` - ì´ë”ë¦¬ì›€/ì›í™”
- `XRP/KRW` - ë¦¬í”Œ/ì›í™”
- `ADA/KRW` - ì¹´ë¥´ë‹¤ë…¸/ì›í™”

### Upbit API í˜•ì‹ (ë‚´ë¶€ ë³€í™˜)
**í˜•ì‹**: `QUOTE-BASE` (í•˜ì´í”ˆ ì‚¬ìš©, ìˆœì„œ ë°˜ëŒ€)

**ìë™ ë³€í™˜**:
- `BTC/KRW` â†’ `KRW-BTC`
- `ETH/KRW` â†’ `KRW-ETH`

âš ï¸ **ì£¼ì˜**: ì›¹í›… ìš”ì²­ ì‹œ í‘œì¤€ í˜•ì‹(`BTC/KRW`)ë§Œ ì‚¬ìš©í•˜ì„¸ìš”. ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ Upbit í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.

### ì‘ë‹µ í˜•ì‹
API ì‘ë‹µì€ ë‹¤ì‹œ í‘œì¤€ í˜•ì‹ìœ¼ë¡œ ë³€í™˜ë©ë‹ˆë‹¤:
- Upbit API: `KRW-BTC`
- ì‹œìŠ¤í…œ ì‘ë‹µ: `BTC/KRW`

### ì§€ì› ì‹¬ë³¼

ì£¼ìš” ì•”í˜¸í™”í (KRW ë§ˆì¼“):
- **ë¹„íŠ¸ì½”ì¸**: `BTC/KRW`
- **ì´ë”ë¦¬ì›€**: `ETH/KRW`
- **ë¦¬í”Œ**: `XRP/KRW`
- **ì¹´ë¥´ë‹¤ë…¸**: `ADA/KRW`
- **ì†”ë¼ë‚˜**: `SOL/KRW`
- **ë„ì§€ì½”ì¸**: `DOGE/KRW`
- **í´ì¹´ë‹·**: `DOT/KRW`

ì „ì²´ ì§€ì› ì‹¬ë³¼ì€ Upbit ê±°ë˜ì†Œì—ì„œ í™•ì¸í•˜ì„¸ìš”.

---

## ì›¹í›… ì‚¬ìš© ì˜ˆì‹œ

### 1. LIMIT ì£¼ë¬¸ ìƒì„±

#### ë§¤ìˆ˜ ì§€ì •ê°€
```bash
curl -k -s -X POST https://your-server/api/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "group_name": "my_strategy",
    "symbol": "BTC/KRW",
    "order_type": "LIMIT",
    "side": "buy",
    "price": "50000000",
    "qty_per": 5,
    "token": "your_webhook_token"
  }'
```

**ì„¤ëª…**:
- 5ì²œë§Œ ì›ì— ë§¤ìˆ˜ ì§€ì •ê°€ ì£¼ë¬¸
- `qty_per`: 5% (ì „ëµ ìë³¸ì˜ 5%)
- ì²´ê²°ë˜ì§€ ì•Šìœ¼ë©´ ë¯¸ì²´ê²° ì£¼ë¬¸ìœ¼ë¡œ ë‚¨ìŒ

#### ë§¤ë„ ì§€ì •ê°€
```bash
curl -k -s -X POST https://your-server/api/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "group_name": "my_strategy",
    "symbol": "BTC/KRW",
    "order_type": "LIMIT",
    "side": "sell",
    "price": "120000000",
    "qty_per": 5,
    "token": "your_webhook_token"
  }'
```

**ì„¤ëª…**:
- 1ì–µ 2ì²œë§Œ ì›ì— ë§¤ë„ ì§€ì •ê°€ ì£¼ë¬¸
- ë³´ìœ  ì¤‘ì¸ BTCì˜ 5%ë¥¼ ë§¤ë„

### 2. MARKET ì£¼ë¬¸

#### ì‹œì¥ê°€ ë§¤ìˆ˜
```bash
curl -k -s -X POST https://your-server/api/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "group_name": "my_strategy",
    "symbol": "BTC/KRW",
    "order_type": "MARKET",
    "side": "buy",
    "qty_per": 5,
    "token": "your_webhook_token"
  }'
```

âš ï¸ **ì£¼ì˜**:
- MARKET ì£¼ë¬¸ì€ ì¦‰ì‹œ ì²´ê²°ë©ë‹ˆë‹¤
- í…ŒìŠ¤íŠ¸ ì‹œ ì†Œì•¡ìœ¼ë¡œ ì§„í–‰í•˜ì„¸ìš” (`qty_per`: 0.01 ~ 1%)
- ìŠ¬ë¦¬í”¼ì§€ ë°œìƒ ê°€ëŠ¥

#### ì‹œì¥ê°€ ë§¤ë„
```bash
curl -k -s -X POST https://your-server/api/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "group_name": "my_strategy",
    "symbol": "BTC/KRW",
    "order_type": "MARKET",
    "side": "sell",
    "qty_per": 5,
    "token": "your_webhook_token"
  }'
```

### 3. ì£¼ë¬¸ ì·¨ì†Œ

#### ì‹¬ë³¼ë³„ ì „ì²´ ì·¨ì†Œ
```bash
curl -k -s -X POST https://your-server/api/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "group_name": "my_strategy",
    "symbol": "BTC/KRW",
    "order_type": "CANCEL_ALL_ORDER",
    "token": "your_webhook_token"
  }'
```

**ê²°ê³¼**: BTC/KRW ì‹¬ë³¼ì˜ ëª¨ë“  ë¯¸ì²´ê²° ì£¼ë¬¸ ì·¨ì†Œ

#### íŠ¹ì • ë°©í–¥ë§Œ ì·¨ì†Œ
```bash
curl -k -s -X POST https://your-server/api/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "group_name": "my_strategy",
    "symbol": "BTC/KRW",
    "side": "buy",
    "order_type": "CANCEL_ALL_ORDER",
    "token": "your_webhook_token"
  }'
```

**ê²°ê³¼**: BTC/KRW ë§¤ìˆ˜ ì£¼ë¬¸ë§Œ ì·¨ì†Œ, ë§¤ë„ ì£¼ë¬¸ì€ ìœ ì§€

### 4. í¬ì§€ì…˜ ì²­ì‚° (qty_per=-100)

#### ë¡± í¬ì§€ì…˜ 100% ì²­ì‚°
```bash
curl -k -s -X POST https://your-server/api/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "group_name": "my_strategy",
    "symbol": "BTC/KRW",
    "order_type": "MARKET",
    "side": "sell",
    "qty_per": -100,
    "token": "your_webhook_token"
  }'
```

**ì„¤ëª…**:
- `qty_per=-100`: ì „ì²´ í¬ì§€ì…˜ ì²­ì‚°
- ë³´ìœ  ì¤‘ì¸ BTCë¥¼ ì‹œì¥ê°€ë¡œ ì „ëŸ‰ ë§¤ë„
- í¬ì§€ì…˜ì´ ì—†ìœ¼ë©´ ì—ëŸ¬ ë°˜í™˜

### 5. ë°°ì¹˜ ì£¼ë¬¸

#### ë˜ë” ì „ëµ (ë‹¨ê³„ë³„ ë§¤ìˆ˜)
```bash
curl -k -s -X POST https://your-server/api/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "group_name": "ladder_strategy",
    "symbol": "BTC/KRW",
    "token": "your_webhook_token",
    "orders": [
      {
        "order_type": "CANCEL_ALL_ORDER"
      },
      {
        "side": "buy",
        "order_type": "LIMIT",
        "price": "95000000",
        "qty_per": 3
      },
      {
        "side": "buy",
        "order_type": "LIMIT",
        "price": "94000000",
        "qty_per": 5
      },
      {
        "side": "buy",
        "order_type": "LIMIT",
        "price": "93000000",
        "qty_per": 7
      }
    ]
  }'
```

**ì²˜ë¦¬ ìˆœì„œ** (ìë™ ì •ë ¬):
1. `CANCEL_ALL_ORDER` - ê¸°ì¡´ ì£¼ë¬¸ ì·¨ì†Œ
2. `LIMIT` (9,500ë§Œ ì›) - 3% ë§¤ìˆ˜
3. `LIMIT` (9,400ë§Œ ì›) - 5% ë§¤ìˆ˜
4. `LIMIT` (9,300ë§Œ ì›) - 7% ë§¤ìˆ˜

**ì†Œìš” ì‹œê°„**: ì•½ 0.5ì´ˆ (4ê°œ ì£¼ë¬¸ Ã— 0.125ì´ˆ)

---

## Rate Limiting

### ì œí•œ ì‚¬í•­
Upbit APIëŠ” ë‹¤ìŒê³¼ ê°™ì€ Rate Limitì„ ì ìš©í•©ë‹ˆë‹¤:

| ì œí•œ ìœ í˜• | ì œí•œ ê°’ |
|-----------|---------|
| **ì´ˆë‹¹ ìš”ì²­** | 8íšŒ |
| **ë¶„ë‹¹ ìš”ì²­** | 600íšŒ |
| **ê°€ì¤‘ì¹˜** | ì—†ìŒ |

### ì‹œìŠ¤í…œ êµ¬í˜„ ë°©ì‹

#### ì™„ì „ ìˆœì°¨ ì‹¤í–‰
```python
# asyncio.Lock()ìœ¼ë¡œ í•œ ë²ˆì— 1ê°œë§Œ ì‹¤í–‰
async with _order_lock:
    await asyncio.sleep(0.125)  # 1/8ì´ˆ = 125ms
    await execute_order()
```

**íŠ¹ì§•**:
- **ë™ì‹œì„±**: ì™„ì „ ìˆœì°¨ (Lock ì‚¬ìš©)
- **ë”œë ˆì´**: ê° ì£¼ë¬¸ ê°„ 0.125ì´ˆ
- **ì‹¤ì œ ì†ë„**: ì´ˆë‹¹ ì•½ 4.4íšŒ (ì•ˆì „ ë§ˆì§„ 55%)

#### ì„±ëŠ¥ ì˜ˆì‹œ

| ì£¼ë¬¸ ìˆ˜ | ì˜ˆìƒ ì†Œìš” ì‹œê°„ |
|---------|---------------|
| 1ê°œ | 0.15ì´ˆ |
| 4ê°œ | 0.5ì´ˆ |
| 8ê°œ | 1.0ì´ˆ |
| 16ê°œ | 2.0ì´ˆ |
| 32ê°œ | 4.0ì´ˆ |

### Rate Limit ì´ˆê³¼ ì‹œ
**ì—ëŸ¬ ì½”ë“œ**: `429 Too Many Requests`

**ëŒ€ì‘ ë°©ì•ˆ**:
- ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ë”œë ˆì´ë¥¼ ì ìš©í•˜ë¯€ë¡œ ì´ˆê³¼ ê°€ëŠ¥ì„± ë‚®ìŒ
- ìˆ˜ë™ API í˜¸ì¶œ ì‹œ ì£¼ì˜ í•„ìš”
- ì—ëŸ¬ ë°œìƒ ì‹œ 1ë¶„ ëŒ€ê¸° í›„ ì¬ì‹œë„

---

## ì œì•½ì‚¬í•­ ë° ì£¼ì˜ì‚¬í•­

### 1. Testnet ë¯¸ì§€ì›
**ë¬¸ì œì **:
- UpbitëŠ” í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ ì œê³µí•˜ì§€ ì•ŠìŒ
- ëª¨ë“  ì£¼ë¬¸ì´ ì‹¤ì œ ê±°ë˜ë¡œ ì‹¤í–‰ë¨

**ëŒ€ì‘ ë°©ì•ˆ**:
- ìµœì†Œ ê¸ˆì•¡ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ (5,000 KRW)
- ì§€ì •ê°€ ì£¼ë¬¸ìœ¼ë¡œ ë¯¸ì²´ê²° ìœ ë„ (í˜„ì¬ê°€ë³´ë‹¤ ë©€ë¦¬ ì„¤ì •)
- í…ŒìŠ¤íŠ¸ í›„ ì¦‰ì‹œ ì·¨ì†Œ

**ì˜ˆì‹œ**:
```bash
# ì•ˆì „í•œ í…ŒìŠ¤íŠ¸ ì£¼ë¬¸ (ë¯¸ì²´ê²° ìœ ë„)
# í˜„ì¬ê°€ 1ì–µ ì›ì¼ ë•Œ 5ì²œë§Œ ì›ì— ë§¤ìˆ˜ ì§€ì •
curl -k -s -X POST https://your-server/api/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "group_name": "test_strategy",
    "symbol": "BTC/KRW",
    "order_type": "LIMIT",
    "side": "buy",
    "price": "50000000",
    "qty_per": 0.01,
    "token": "your_webhook_token"
  }'
```

### 2. ìµœì†Œ ì£¼ë¬¸ê¸ˆì•¡ (5,000 KRW)
**ê·œì¹™**:
- ëª¨ë“  ì£¼ë¬¸ì€ 5,000 KRW ì´ìƒì´ì–´ì•¼ í•¨
- `ì£¼ë¬¸ê¸ˆì•¡ = ê°€ê²© Ã— ìˆ˜ëŸ‰`

**ì˜ˆì‹œ**:
```python
# âœ… ì •ìƒ: 5,000 KRW ì´ìƒ
price = 50,000,000  # 5ì²œë§Œ ì›
quantity = 0.0001   # 0.0001 BTC
amount = 50,000,000 * 0.0001 = 5,000 KRW  # OK

# âŒ ì˜¤ë¥˜: 5,000 KRW ë¯¸ë§Œ
price = 50,000,000
quantity = 0.00005  # ë„ˆë¬´ ì ìŒ
amount = 50,000,000 * 0.00005 = 2,500 KRW  # ERROR
```

**ì—ëŸ¬ ë©”ì‹œì§€**:
```
"ì£¼ë¬¸ ê¸ˆì•¡ì´ ìµœì†Œ ì£¼ë¬¸ ê¸ˆì•¡(5,000 KRW) ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤."
```

### 3. ë°°ì¹˜ API ë¯¸ì§€ì›
**ì œì•½**:
- Binanceì˜ `batchOrders` ê°™ì€ ë°°ì¹˜ API ì—†ìŒ
- ëª¨ë“  ì£¼ë¬¸ì„ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬

**êµ¬í˜„ ë°©ì‹**:
```python
# ìˆœì°¨ í´ë°± (Sequential Fallback)
for order in orders:
    await asyncio.sleep(0.125)  # Rate Limit ì¤€ìˆ˜
    await execute_order(order)
```

**ì˜í–¥**:
- ëŒ€ëŸ‰ ì£¼ë¬¸ ì‹œ ì‹œê°„ ì†Œìš” ì¦ê°€
- 16ê°œ ì£¼ë¬¸: ì•½ 2ì´ˆ ì†Œìš”
- ì‹¤ì‹œê°„ì„±ì´ ì¤‘ìš”í•œ ê²½ìš° ì£¼ë¬¸ ìˆ˜ ìµœì†Œí™” ê¶Œì¥

### 4. KRW ë§ˆì¼“ ì „ìš©
**ì§€ì› ë§ˆì¼“**:
- âœ… KRW (ì›í™”) ë§ˆì¼“ë§Œ
- âŒ BTC, USDT ë§ˆì¼“ ë¯¸ì§€ì›

**ê°€ê²© ë‹¨ìœ„**:
- **KRW**: ì •ìˆ˜ (ì†Œìˆ˜ì  ì—†ìŒ)
  - `"price": "50000000"` âœ…
  - `"price": "50000000.50"` âŒ

**ì˜ëª»ëœ ì‹¬ë³¼**:
```bash
# âŒ ì˜¤ë¥˜: BTC ë§ˆì¼“ (ë¯¸ì§€ì›)
"symbol": "ETH/BTC"

# âœ… ì •ìƒ: KRW ë§ˆì¼“
"symbol": "ETH/KRW"
```

### 5. ì£¼ë¬¸ íƒ€ì… ì œí•œ
**ì§€ì›í•˜ì§€ ì•ŠëŠ” íƒ€ì…**:
- `STOP_LIMIT`
- `STOP_MARKET`
- `TRAILING_STOP`
- `OCO` (One-Cancels-Other)

**ëŒ€ì•ˆ**:
- ì†ì ˆ/ìµì ˆì´ í•„ìš”í•œ ê²½ìš°:
  1. Binance ë“± STOP ì£¼ë¬¸ ì§€ì› ê±°ë˜ì†Œ ì‚¬ìš©
  2. ë˜ëŠ” ë³„ë„ ëª¨ë‹ˆí„°ë§ ìŠ¤í¬ë¦½íŠ¸ êµ¬í˜„

---

## ê°€ê²© í˜¸ê°€ ë‹¨ìœ„

KRW ë§ˆì¼“ì˜ í˜¸ê°€ ë‹¨ìœ„ëŠ” ê°€ê²©ëŒ€ë³„ë¡œ ë‹¤ë¦…ë‹ˆë‹¤:

| ê°€ê²©ëŒ€ | í˜¸ê°€ ë‹¨ìœ„ | ì˜ˆì‹œ |
|--------|----------|------|
| **200ë§Œ ì› ì´ìƒ** | 1,000ì› | 2,001,000ì› â†’ 2,002,000ì› |
| **100ë§Œ ~ 200ë§Œ ì›** | 500ì› | 1,000,500ì› â†’ 1,001,000ì› |
| **50ë§Œ ~ 100ë§Œ ì›** | 100ì› | 500,100ì› â†’ 500,200ì› |
| **10ë§Œ ~ 50ë§Œ ì›** | 50ì› | 100,050ì› â†’ 100,100ì› |
| **10ë§Œ ì› ë¯¸ë§Œ** | 1ì› | 99,999ì› â†’ 100,000ì› |

### í˜¸ê°€ ë‹¨ìœ„ ì ìš© ì˜ˆì‹œ

```python
# ì£¼ë¬¸ ê°€ê²©ì´ í˜¸ê°€ ë‹¨ìœ„ì— ë§ì§€ ì•Šìœ¼ë©´ Upbit APIê°€ ì—ëŸ¬ ë°˜í™˜
# ì‹œìŠ¤í…œì—ì„œ ìë™ìœ¼ë¡œ í˜¸ê°€ ë‹¨ìœ„ì— ë§ì¶° ë°˜ì˜¬ë¦¼/ë‚´ë¦¼ ì²˜ë¦¬

# ì˜ˆì‹œ 1: ê°€ê²© 2,500,000ì› (250ë§Œ ì›)
# í˜¸ê°€ ë‹¨ìœ„: 1,000ì›
"price": "2500000"  # âœ… OK
"price": "2500500"  # âŒ ERROR (í˜¸ê°€ ë‹¨ìœ„ ìœ„ë°˜)

# ì˜ˆì‹œ 2: ê°€ê²© 150,000ì› (15ë§Œ ì›)
# í˜¸ê°€ ë‹¨ìœ„: 50ì›
"price": "150000"  # âœ… OK
"price": "150050"  # âœ… OK
"price": "150025"  # âŒ ERROR (í˜¸ê°€ ë‹¨ìœ„ ìœ„ë°˜)
```

âš ï¸ **ì£¼ì˜**: ì›¹í›…ì—ì„œ ì „ì†¡í•˜ëŠ” ê°€ê²©ì€ í˜¸ê°€ ë‹¨ìœ„ë¥¼ ì¤€ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤. ì‹œìŠ¤í…œì´ ìë™ ì¡°ì •í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

---

## ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: "ì§€ì›ë˜ì§€ ì•ŠëŠ” ê±°ë˜ì†Œ" ì—ëŸ¬

**ì¦ìƒ**:
```json
{
  "error": "ì§€ì›ë˜ì§€ ì•ŠëŠ” ê±°ë˜ì†Œ: upbit"
}
```

**ì›ì¸**: Exchange í•„ë“œ ì˜¤íƒ€ ë˜ëŠ” ì†Œë¬¸ì ì…ë ¥

**í•´ê²°**:
- `UPBIT` ì •í™•íˆ ì…ë ¥ (ëŒ€ë¬¸ì)
- ì•ë’¤ ê³µë°± ì œê±°
- ë³µì‚¬-ë¶™ì—¬ë„£ê¸° ê¶Œì¥

---

### ë¬¸ì œ 2: "Testnet ë¯¸ì§€ì›" ì—ëŸ¬

**ì¦ìƒ**:
```json
{
  "error": "Upbit does not support testnet"
}
```

**ì›ì¸**: ê³„ì • ë“±ë¡ ì‹œ "Is Testnet" ì²´í¬ë°•ìŠ¤ ì„ íƒë¨

**í•´ê²°**:
1. ê³„ì • ê´€ë¦¬ í˜ì´ì§€ ì´ë™
2. Upbit ê³„ì • í¸ì§‘
3. **Is Testnet** ì²´í¬ í•´ì œ
4. ì €ì¥

---

### ë¬¸ì œ 3: "ì‹¬ë³¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ" ì—ëŸ¬

**ì¦ìƒ**:
```json
{
  "error": "Invalid market code: BTCKRW"
}
```

**ì›ì¸**: ì‹¬ë³¼ í˜•ì‹ ì˜¤ë¥˜

**ì˜ëª»ëœ í˜•ì‹**:
- `"BTCKRW"` (ìŠ¬ë˜ì‹œ ì—†ìŒ)
- `"KRW-BTC"` (Upbit API í˜•ì‹)
- `"BTC-KRW"` (í•˜ì´í”ˆ ì‚¬ìš©)

**ì˜¬ë°”ë¥¸ í˜•ì‹**:
- `"BTC/KRW"` âœ… (ìŠ¬ë˜ì‹œ í¬í•¨)

**í•´ê²°**:
```bash
# âŒ ì˜ëª»ëœ ì›¹í›…
curl -X POST https://your-server/api/webhook \
  -d '{"symbol": "BTCKRW", ...}'

# âœ… ì˜¬ë°”ë¥¸ ì›¹í›…
curl -X POST https://your-server/api/webhook \
  -d '{"symbol": "BTC/KRW", ...}'
```

---

### ë¬¸ì œ 4: "ìµœì†Œ ì£¼ë¬¸ê¸ˆì•¡ ë¯¸ë‹¬" ì—ëŸ¬

**ì¦ìƒ**:
```json
{
  "error": "ì£¼ë¬¸ ê¸ˆì•¡ì´ ìµœì†Œ ì£¼ë¬¸ ê¸ˆì•¡(5,000 KRW) ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤."
}
```

**ì›ì¸**: ì£¼ë¬¸ ê¸ˆì•¡ì´ 5,000 KRW ë¯¸ë§Œ

**í™•ì¸ ë°©ë²•**:
```python
ì£¼ë¬¸ ê¸ˆì•¡ = ê°€ê²© Ã— ìˆ˜ëŸ‰
ì˜ˆ: 50,000,000 Ã— 0.00005 = 2,500 KRW  # âŒ ë¯¸ë‹¬
```

**í•´ê²°**:
1. ìˆ˜ëŸ‰ ì¦ê°€: `qty_per` ì¦ê°€
2. ë˜ëŠ” ë‹¤ë¥¸ ì‹¬ë³¼ ì„ íƒ (ë‚®ì€ ê°€ê²©ëŒ€)

**ì˜ˆì‹œ**:
```bash
# âŒ ì˜¤ë¥˜: 2,500 KRW
curl -X POST https://your-server/api/webhook \
  -d '{
    "symbol": "BTC/KRW",
    "price": "50000000",
    "qty_per": 0.0001
  }'

# âœ… ì •ìƒ: 10,000 KRW
curl -X POST https://your-server/api/webhook \
  -d '{
    "symbol": "BTC/KRW",
    "price": "50000000",
    "qty_per": 0.0004
  }'
```

---

### ë¬¸ì œ 5: Rate Limit ì´ˆê³¼ (429 ì—ëŸ¬)

**ì¦ìƒ**:
```json
{
  "error": "Too many requests"
}
```

**ì›ì¸**: API í˜¸ì¶œ ê³¼ë‹¤ (ì´ˆë‹¹ 8íšŒ ì´ˆê³¼)

**í•´ê²°**:
1. ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ë”œë ˆì´ ì ìš©
2. ìˆ˜ë™ API í˜¸ì¶œ ì‹œ ê°„ê²© ì¡°ì ˆ
3. 1ë¶„ ëŒ€ê¸° í›„ ì¬ì‹œë„

**ì˜ˆë°©**:
- ë°°ì¹˜ ì£¼ë¬¸ ê¶Œì¥ (ìë™ Rate Limit ê´€ë¦¬)
- ìˆ˜ë™ í˜¸ì¶œ ì‹œ 0.125ì´ˆ ì´ìƒ ê°„ê²©

---

### ë¬¸ì œ 6: JWT ì¸ì¦ ì˜¤ë¥˜

**ì¦ìƒ**:
```json
{
  "error": "JWT verification failed"
}
```

**ì›ì¸**:
- API Key ë˜ëŠ” Secret Key ì˜¤ë¥˜
- íŠ¹ìˆ˜ë¬¸ì ë³µì‚¬ ì˜¤ë¥˜

**í•´ê²°**:
1. Upbitì—ì„œ API Key ì¬í™•ì¸
2. ì•ë’¤ ê³µë°± ì œê±°
3. íŠ¹ìˆ˜ë¬¸ì ì •í™•íˆ ë³µì‚¬
4. í•„ìš” ì‹œ API Key ì¬ë°œê¸‰

---

### ë¬¸ì œ 7: "ì”ì•¡ ë¶€ì¡±" ì—ëŸ¬

**ì¦ìƒ**:
```json
{
  "error": "insufficient balance"
}
```

**ì›ì¸**: KRW ì”ì•¡ ë¶€ì¡±

**í™•ì¸ ë°©ë²•**:
1. Upbit ì•±/ì›¹ì—ì„œ ì”ì•¡ í™•ì¸
2. ì‹œìŠ¤í…œ ëŒ€ì‹œë³´ë“œì—ì„œ ì”ì•¡ ì¡°íšŒ

**í•´ê²°**:
- Upbitì— KRW ì…ê¸ˆ
- ë˜ëŠ” `qty_per` ê°ì†Œ

---

## ë¡œê·¸ í™•ì¸

### ì‹¤ì‹œê°„ ë¡œê·¸ ëª¨ë‹ˆí„°ë§

```bash
# Upbit ê´€ë ¨ ë¡œê·¸ë§Œ í•„í„°ë§
tail -f /Users/binee/Desktop/quant/webserver/web_server/logs/app.log | grep -E "(Upbit|UPBIT)"

# ì—ëŸ¬ë§Œ í™•ì¸
tail -f /Users/binee/Desktop/quant/webserver/web_server/logs/app.log | grep -E "(ERROR|CRITICAL)" | grep -i upbit

# ì£¼ë¬¸ ì‹¤í–‰ ë¡œê·¸
tail -f /Users/binee/Desktop/quant/webserver/web_server/logs/app.log | grep "ë°°ì¹˜ ì£¼ë¬¸"
```

### ì •ìƒ ë¡œê·¸ ì˜ˆì‹œ

#### ì´ˆê¸°í™”
```
âœ… Upbit ê±°ë˜ì†Œ ì´ˆê¸°í™”
âœ… upbit ê±°ë˜ì†Œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± - Testnet: False
```

#### ì£¼ë¬¸ ìƒì„±
```
ğŸ”„ ì‹¬ë³¼ ë³€í™˜: BTC/KRW â†’ KRW-BTC
ğŸ” Upbit API í˜¸ì¶œ: /v1/orders
ğŸ” ì£¼ë¬¸ íŒŒë¼ë¯¸í„°: {'market': 'KRW-BTC', 'side': 'bid', 'ord_type': 'limit', 'price': '50000000', 'volume': '0.001'}
ğŸ” Upbit API ì‘ë‹µ: {'uuid': 'abc-123-def', 'side': 'bid', 'state': 'wait', ...}
âœ… Upbit ë°°ì¹˜ ì£¼ë¬¸ [0] ì„±ê³µ: order_id=abc-123-def, symbol=BTC/KRW
```

#### ë°°ì¹˜ ì£¼ë¬¸
```
ğŸ“¦ Upbit ë°°ì¹˜ ì£¼ë¬¸ ì‹œì‘: 3ê±´ (Rate Limit: ì´ˆë‹¹ 8íšŒ)
âœ… Upbit ë°°ì¹˜ ì£¼ë¬¸ [0] ì„±ê³µ: order_id=uuid-1, symbol=BTC/KRW
âœ… Upbit ë°°ì¹˜ ì£¼ë¬¸ [1] ì„±ê³µ: order_id=uuid-2, symbol=BTC/KRW
âœ… Upbit ë°°ì¹˜ ì£¼ë¬¸ [2] ì„±ê³µ: order_id=uuid-3, symbol=BTC/KRW
ğŸ“¦ Upbit ë°°ì¹˜ ì£¼ë¬¸ ì™„ë£Œ: 3/3 ì„±ê³µ, ì†Œìš”ì‹œê°„: 0.45ì´ˆ (í‰ê·  0.150ì´ˆ/ì£¼ë¬¸), implementation=SEQUENTIAL_FALLBACK
```

### ì—ëŸ¬ ë¡œê·¸ ì˜ˆì‹œ

#### API í‚¤ ì˜¤ë¥˜
```
âŒ Upbit API ì—ëŸ¬ [401]: Invalid access key
âŒ Upbit API ìš”ì²­ ì‹¤íŒ¨: Upbit API Error [401]: Invalid access key
```

#### ì‹¬ë³¼ ì˜¤ë¥˜
```
âŒ Upbit API ì—ëŸ¬ [400]: Invalid market code: BTCKRW
```

#### ìµœì†Œ ì£¼ë¬¸ê¸ˆì•¡ ë¯¸ë‹¬
```
âŒ Upbit API ì—ëŸ¬ [400]: ì£¼ë¬¸ ê¸ˆì•¡ì´ ìµœì†Œ ì£¼ë¬¸ ê¸ˆì•¡(5,000 KRW) ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.
```

---

## ì„±ëŠ¥ ìµœì í™”

### ìºì‹±
ì‹œìŠ¤í…œì€ ë‹¤ìŒ ë°ì´í„°ë¥¼ ìºì‹±í•˜ì—¬ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤:

| ë°ì´í„° | TTL | ìš©ë„ |
|--------|-----|------|
| **ë§ˆì¼“ ì •ë³´** | 5ë¶„ | ì‹¬ë³¼ ê²€ì¦ |
| **ê°€ê²© ì •ë³´** | 1ì´ˆ | ì‹¤ì‹œê°„ ê°€ê²© ì¡°íšŒ |

### ë°°ì¹˜ ì£¼ë¬¸ ìµœì í™”
- ìˆœì°¨ ì²˜ë¦¬ë¡œ Rate Limit ì¤€ìˆ˜
- ì£¼ë¬¸ ìš°ì„ ìˆœìœ„ ìë™ ì •ë ¬
- ì‹¤íŒ¨í•œ ì£¼ë¬¸ì€ ì¬ì‹œë„í•˜ì§€ ì•ŠìŒ (ê²°ê³¼ì— í¬í•¨)

---

## êµ¬í˜„ ì„¸ë¶€ì‚¬í•­

### í´ë˜ìŠ¤ ë° ë©”ì„œë“œ (ì½”ë“œ ê¸°ë°˜)

**íŒŒì¼**: `web_server/app/exchanges/crypto/upbit.py` (799ì¤„)
**íƒœê·¸**: `@FEAT:exchange-integration @COMP:exchange @TYPE:crypto-implementation` (ë¼ì¸ 1)

#### í•µì‹¬ ë©”ì„œë“œ
| ë©”ì„œë“œ | ê¸°ëŠ¥ | ë¼ì¸ |
|-------|------|-----|
| `__init__()` | ì´ˆê¸°í™” (Testnet ê²€ì¦) | 67 |
| `load_markets_impl()` | ë§ˆì¼“ ì •ë³´ ë¡œë“œ (215 ì‹¬ë³¼) | 228 |
| `fetch_price_quotes()` | í˜„ì¬ê°€ ì •ë³´ ì¡°íšŒ | 282 |
| `fetch_balance_impl()` | ì”ì•¡ ì¡°íšŒ | 348 |
| `create_order_impl()` | ë‹¨ì¼ ì£¼ë¬¸ ìƒì„± | 377 |
| `cancel_order_impl()` | ì£¼ë¬¸ ì·¨ì†Œ | 421 |
| `fetch_open_orders_impl()` | ë¯¸ì²´ê²° ì£¼ë¬¸ ì¡°íšŒ | 437 |
| `_to_order_dict()` | Order í•„ë“œëª… ì •ê·œí™” | 525 |
| `create_batch_orders_async()` | ë°°ì¹˜ ì£¼ë¬¸ (ìˆœì°¨ í´ë°±, ì´ˆë‹¹ 8íšŒ) | 649 |

### ë°°ì¹˜ ì£¼ë¬¸ ìƒì„¸

**êµ¬í˜„**: `create_batch_orders_async()` (line 649-799, 151ì¤„)

**íŠ¹ì§•**:
- **Rate Limiting**: asyncio.Lock()ìœ¼ë¡œ ì™„ì „ ìˆœì°¨ ì‹¤í–‰
- **ë”œë ˆì´**: ê° ì£¼ë¬¸ ê°„ 0.125ì´ˆ (1/8ì´ˆ = ì´ˆë‹¹ 8íšŒ ì œí•œ ì¤€ìˆ˜)
- **ì‹¤íŒ¨ ì²˜ë¦¬**: ê°œë³„ ì‹¤íŒ¨ëŠ” ê²°ê³¼ í¬í•¨, ì „ì²´ ì¤‘ë‹¨ ì—†ìŒ
- **ë°˜í™˜ í˜•ì‹**:
  ```json
  {
    "success": true,
    "results": [
      {"order_index": 0, "success": true, "order_id": "...", "order": {...}},
      {"order_index": 1, "success": false, "error": "..."}
    ],
    "summary": {"total": 2, "successful": 1, "failed": 1},
    "implementation": "SEQUENTIAL_FALLBACK"
  }
  ```

**ì„±ëŠ¥**:
```
16ê°œ ì£¼ë¬¸ â‰ˆ 2.0ì´ˆ (16 Ã— 0.125ì´ˆ + ì˜¤ë²„í—¤ë“œ)
í‰ê· : 0.125ì´ˆ/ì£¼ë¬¸
```

**ì£¼ìš” ì½”ë“œ (line 713-717)**:
```python
async def execute_with_limit(idx: int, order: Dict[str, Any]) -> Dict[str, Any]:
    """Rate limit ì œì–´ì™€ í•¨ê»˜ ë‹¨ì¼ ì£¼ë¬¸ ì‹¤í–‰ (ì™„ì „ ìˆœì°¨)"""
    async with _order_lock:
        # â­ CRITICAL: Rate Limiting - ì´ˆë‹¹ 8íšŒë¡œ ì œí•œ
        await asyncio.sleep(0.125)  # 1/8ì´ˆ = 125ms
        await self.create_order_async(...)
```

### ì‹¬ë³¼ ë³€í™˜ (ë‹¨ì¼ ì†ŒìŠ¤ ì›ì¹™)

**ì „í™˜ í•¨ìˆ˜**: `symbol_utils.py` (line 27 import)
- **ì›¹í›… ì…ë ¥**: `BTC/KRW` (í‘œì¤€ í˜•ì‹)
- **Upbit API**: `KRW-BTC` (Upbit í˜•ì‹)
- **ë³€í™˜ í•¨ìˆ˜**: `to_upbit_format()`, `from_upbit_format()` (symbol_utils.py)

**í•„ë“œëª… ì •ê·œí™”**: `_to_order_dict()` (line 525-575, 50ì¤„)
- ê¸°ëŠ¥: Order ê°ì²´ë¥¼ API ì‘ë‹µ í˜•ì‹ìœ¼ë¡œ ì •ê·œí™”
- **í•„ë“œ ë³€í™˜**:
  - `Order.type` (ì†Œë¬¸ì) â†’ `order_dict['order_type']` (ëŒ€ë¬¸ì)
  - `Order.status` â†’ `order_dict['state']` (Upbit APIëª…)
- **í•˜ìœ„ í˜¸í™˜ì„±**: ì›ë³¸ í•„ë“œ ìœ ì§€ (Order.typeë„ í¬í•¨)
- **ì´ìƒ ì¼€ì´ìŠ¤ ê°ì§€**: stop_priceê°€ ìˆëŠ” ë¹„ìŠ¤íƒ‘ ì£¼ë¬¸ ê°ì§€ ë° ê²½ê³  ë¡œê·¸

---

## ì°¸ê³  ìë£Œ

### ê³µì‹ ë¬¸ì„œ
- [Upbit API ê³µì‹ ë¬¸ì„œ](https://docs.upbit.com)
- [Upbit Open API ê°€ì´ë“œ](https://docs.upbit.com/docs/getting-started)
- [ë§ˆì¼“ ì½”ë“œ ì¡°íšŒ](https://docs.upbit.com/reference/market-ì „ì²´-ì¢…ëª©-ì¡°íšŒ)
- [ì£¼ë¬¸í•˜ê¸° API](https://docs.upbit.com/reference/order-ì£¼ë¬¸í•˜ê¸°)

### í”„ë¡œì íŠ¸ ë‚´ë¶€
- **êµ¬í˜„**: `web_server/app/exchanges/crypto/upbit.py` (800ì¤„, 215 ì‹¬ë³¼)
- **ì‹¬ë³¼ ë³€í™˜**: `web_server/app/utils/symbol_utils.py`
- **íŒ©í† ë¦¬**: `web_server/app/exchanges/crypto/factory.py`
- **ê¸°ë³¸ í´ë˜ìŠ¤**: `web_server/app/exchanges/crypto/base.py`

### ê´€ë ¨ ë¬¸ì„œ
- [ì›¹í›… ë©”ì‹œì§€ í¬ë§· ê°€ì´ë“œ](../webhook_message_format.md)
- [ê±°ë˜ì†Œ í†µí•© ê°€ì´ë“œ](./exchange-integration.md)
- [FEATURE CATALOG](../FEATURE_CATALOG.md)

---

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-10-30
**ì½”ë“œ ê¸°ì¤€**: upbit.py (799ì¤„, 215 ì‹¬ë³¼, 100% ì •ë ¬)
**êµ¬í˜„ ìƒíƒœ**: âœ… Spot LIMIT/MARKET, ë°°ì¹˜ ì£¼ë¬¸ (ìˆœì°¨ í´ë°±, asyncio.Lock)
**ë²„ì „**: 2.1
