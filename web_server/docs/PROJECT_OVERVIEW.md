# 암호화폐 자동 거래 시스템 프로젝트 개요

## 프로젝트 소개

이 프로젝트는 Flask 기반의 **암호화폐 자동 거래 시스템**입니다. 여러 거래소의 계정을 통합 관리하고, 웹훅 기반의 트레이딩 시그널을 처리하여 자동으로 거래를 실행하는 웹 애플리케이션입니다.

### 주요 특징

- **다중 거래소 지원**: Binance, Bybit, OKX 거래소 연동
- **실시간 포지션 모니터링**: WebSocket을 통한 실시간 가격 업데이트
- **자동 거래 실행**: 웹훅 시그널 기반 자동 주문 실행
- **리스크 관리**: 포지션 한도, 레버리지 관리, 자본 배분
- **사용자 관리**: 다중 사용자 지원 및 관리자 기능
- **리포팅**: 일일 거래 요약, 수익률 분석
- **알림 시스템**: Telegram 봇을 통한 실시간 알림

## 시스템 구성요소

### 1. 웹 애플리케이션 (Flask)
- **라우팅**: Blueprint 기반 모듈화된 라우트 구조
- **인증**: Flask-Login을 통한 사용자 인증
- **보안**: CSRF 보호, 비밀번호 해싱, API 키 암호화
- **템플릿**: Jinja2 템플릿 엔진

### 2. 데이터베이스 (SQLAlchemy)
- **ORM**: SQLAlchemy를 통한 데이터베이스 추상화
- **마이그레이션**: Flask-Migrate(Alembic) 사용
- **모델**: 사용자, 계정, 전략, 포지션, 주문, 거래 등

### 3. 거래소 연동 (CCXT)
- **통합 API**: CCXT 라이브러리를 통한 거래소 API 통합
- **지원 거래소**: Binance, Bybit, OKX
- **기능**: 주문 실행, 포지션 조회, 잔고 확인

### 4. 실시간 업데이트 (WebSocket)
- **가격 스트리밍**: 거래소별 WebSocket 연결
- **자동 재연결**: 연결 실패 시 자동 재연결
- **멀티플렉싱**: 여러 심볼 동시 구독

### 5. 백그라운드 작업 (APScheduler)
- **주문 상태 업데이트**: 30초마다 실행
- **미실현 손익 계산**: 5분마다 실행
- **일일 리포트**: 매일 오후 9시 실행
- **정밀도 캐시 관리**: 정기적인 캐시 정리

## 주요 기능

### 거래 관리
- **포지션 관리**: 실시간 포지션 모니터링 및 관리
- **주문 실행**: 시장가/지정가 주문 실행
- **주문 취소**: 개별/일괄 주문 취소
- **자동 거래**: 웹훅 시그널 기반 자동 거래

### 전략 관리
- **전략 생성**: 커스텀 거래 전략 설정
- **계정 연결**: 전략별 거래 계정 연결
- **자본 배분**: 전략별 자본 할당
- **심볼 제한**: 최대 거래 심볼 수 제한

### 리스크 관리
- **레버리지 제어**: 계정별 레버리지 설정
- **포지션 한도**: 최대 포지션 수 제한
- **자본 관리**: 전략별 자본 배분
- **손절/익절**: 자동 손절/익절 설정

### 모니터링 및 리포팅
- **대시보드**: 실시간 계정 현황 및 수익률
- **포지션 뷰**: 통합 포지션 및 주문 현황
- **거래 내역**: 상세 거래 기록
- **일일 리포트**: 자동 생성 일일 거래 요약

### 시스템 관리
- **사용자 관리**: 사용자 생성/수정/삭제
- **계정 관리**: 거래소 API 키 관리
- **시스템 모니터링**: 백그라운드 작업 상태
- **로그 관리**: 시스템 및 거래 로그

## 기술 스택

### Backend
- **Framework**: Flask 2.3.3
- **Database**: SQLAlchemy, SQLite (개발), PostgreSQL/MySQL (프로덕션)
- **Authentication**: Flask-Login
- **Scheduler**: APScheduler
- **Exchange API**: CCXT 4.1.64
- **Notifications**: python-telegram-bot

### Frontend
- **Templates**: Jinja2
- **CSS Framework**: Bootstrap 5
- **JavaScript**: Vanilla JS, WebSocket API
- **Real-time**: WebSocket 기반 실시간 업데이트
- **Theme**: Light/Dark 모드 지원

### DevOps
- **Migrations**: Flask-Migrate (Alembic)
- **Logging**: Python logging with rotating file handler
- **Security**: bcrypt, CSRF protection
- **Configuration**: Environment-based config

## 프로젝트 구조

```
webserver/
├── app/                    # 애플리케이션 패키지
│   ├── __init__.py        # 애플리케이션 팩토리
│   ├── models.py          # 데이터베이스 모델
│   ├── routes/            # 라우트 핸들러
│   ├── services/          # 비즈니스 로직
│   ├── static/            # 정적 파일 (CSS, JS, 이미지)
│   └── templates/         # HTML 템플릿
├── docs/                  # 프로젝트 문서
├── migrations/            # 데이터베이스 마이그레이션
├── tests/                 # 테스트 코드
├── app.py                 # 애플리케이션 진입점
├── config.py              # 설정 파일
├── requirements.txt       # 파이썬 의존성
└── init_db.py            # 데이터베이스 초기화
```

## 보안 고려사항

- **API 키 암호화**: 거래소 API 키는 암호화되어 저장
- **비밀번호 해싱**: bcrypt를 사용한 안전한 비밀번호 저장
- **CSRF 보호**: 모든 폼 제출에 CSRF 토큰 적용
- **인증 필수**: 모든 주요 기능은 로그인 필요
- **관리자 권한**: 민감한 기능은 관리자만 접근 가능

## 확장성

- **모듈화된 구조**: Blueprint 기반 라우트 분리
- **서비스 레이어**: 비즈니스 로직 분리
- **거래소 추가**: CCXT 지원 거래소 쉽게 추가 가능
- **전략 확장**: 새로운 거래 전략 쉽게 구현 가능
- **데이터베이스 확장**: SQLAlchemy ORM으로 다양한 DB 지원

## 향후 개발 방향

1. **API 문서화**: Swagger/OpenAPI 스펙 추가
2. **테스트 커버리지**: 단위 테스트 및 통합 테스트 확대
3. **성능 최적화**: 캐싱, 비동기 처리 개선
4. **모니터링 강화**: Prometheus/Grafana 연동
5. **컨테이너화**: Docker 지원 추가
6. **CI/CD**: 자동화된 배포 파이프라인 구축